(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{23:function(e,t,a){e.exports=a(58)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),i=a.n(r),o=a(7),l=a(3),u=a(2),s=function(e){return{type:"SET_IS_TOGGLE_LOADING",data:e}},d={isToggleLoading:!1};var m=function(e){return{type:"SET_DATA_CURRENT_CITY",data:e}},g={data:{coordinates:{latitude:null,longitude:null},name:null,weather:null}};var f={data:null};var E=function(e){return{type:"SET_GEO",data:e}},v={data:null};var p=Object(l.combineReducers)({appConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=null;switch(t.type){case"SET_IS_TOGGLE_LOADING":return a=t.data,Object(u.a)({},e,{},{isToggleLoading:a});default:return e}},currentCity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=e.data,n=null;switch(t.type){case"SET_DATA_CURRENT_CITY":return n=t.data,Object(u.a)({},e,{},{data:Object(u.a)({},a,{},n)});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=null,n=null;switch(t.type){case"SET_WEATHER":return a=t.data,Object(u.a)({},e,{},{data:a});case"REQUEST_FAILED":return n=t.data,Object(u.a)({},e,{},{data:Object(u.a)({},n)});default:return e}},geo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=null;switch(t.type){case"SET_GEO":return a=t.data,Object(u.a)({},e,{},{data:a});default:return e}}}),h=a(21),b=a(22),y=Object(l.createStore)(p,Object(h.composeWithDevTools)(Object(l.applyMiddleware)(b.a))),T=a(4);a(34);function _(e){var t=e.getGeo,a=e.isToggleLoading;return c.a.createElement("div",{className:"geoAuto"},c.a.createElement("div",{className:"geoAuto__button",onClick:function(){t()},disabled:a},c.a.createElement("i",{className:"fas fa-street-view"})))}a(35);function C(e){var t=e.getWeather,a=Object(n.useState)(""),r=Object(T.a)(a,2),i=r[0],o=r[1];return c.a.createElement("div",{className:"geoManual"},c.a.createElement("div",{className:"geoManual__button margin-bottom20px",onClick:function(){t(i)},disabled:!i},c.a.createElement("i",{class:"fas fa-wind"})),c.a.createElement("input",{className:"margin-bottom20px",type:"text",placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430...",value:i,onChange:function(e){o(e.currentTarget.value)}}))}a(36);function O(e){var t=e.city,a=e.temperature;return c.a.createElement("div",{className:"display"},c.a.createElement("div",{className:"informMenu"},c.a.createElement("div",{className:"informMenu-city"},t||"..."),c.a.createElement("div",{className:"informMenu-temperature"},null!==a?"".concat(a,"\xb0"):"...")))}a(37);function k(e){return c.a.createElement("div",{className:"loading"},c.a.createElement("div",{className:"spinner"},c.a.createElement("div",{className:"rectangle-big rectangle"},c.a.createElement("div",{className:"rectangle-toggle rectangle"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043e\u0447\u043a\u0430..."))))}function N(e){var t=e.isSelected,a=e.dataId,n=e.title,r=e.onClick,i=e.routeClick,o=function(){i(a),r(a)};return c.a.createElement("div",{className:"button ".concat(t===a?"active":""),"data-id":a,onClick:function(){o()},disabled:t===a},n)}a(38);function j(e){var t=e.routeClick,a=Object(n.useState)(0),r=Object(T.a)(a,2),i=r[0],o=r[1];return c.a.createElement("div",{className:"animateMenu"},c.a.createElement(N,{isSelected:i,dataId:0,title:c.a.createElement("i",{className:"fas fa-map-marked-alt"}),onClick:o,routeClick:t,key:0}),c.a.createElement(N,{isSelected:i,dataId:1,title:c.a.createElement("i",{className:"fas fa-pencil-alt"}),onClick:o,routeClick:t,key:1}))}a(39);var w=a(6),S=a.n(w),A=S.a.create({baseURL:"https://api.opencagedata.com/geocode/v1/"}),L={key:"46c3cf317a3e408a88ccefa30701b1e5",getAddress:function(e,t){return A.get("json?q=".concat(e,"+").concat(t,"&key=").concat(this.key)).then((function(e){return e.data.results[0]}))}},G=S.a.create({baseURL:"http://api.weatherstack.com/"}),I={access_key:"a1f5cfaba2e1ca627e17d4c65be60a87",getWeather:function(e){return G.get("current?access_key=".concat(this.access_key,"&query=").concat(e)).then((function(e){return e.data}))}},R=function(e){return function(t){t(s(!0)),I.getWeather(e).then((function(a){t(s(!1)),t(function(e){return{type:"SET_WEATHER",data:e}}(a.current)),t(m({weather:a.current.temperature,name:e}))})).catch((function(a){t({type:"REQUEST_FAILED",data:{temperature:"\u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}}),t(m({weather:"\u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",name:e})),t(s(!1))}))}};var W={getGeo:function(){return function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var a,n,c=t.coords.latitude,r=t.coords.longitude;e(E({latitude:c,longitude:r})),e((a=c,n=r,function(e){e(s(!0)),L.getAddress(a,n).then((function(t){e(R(t.components.city)),e(s(!1))})).catch((function(t){e(s(!1))}))})),e(m({coordinates:{latitude:c,longitude:r}}))}),(function(){e(E({error:"Unable to retrieve your location"}))})):e(E({error:"geo not found"}))}},getWeather:R},D=Object(o.b)((function(e){return{temperature:e.currentCity.data.weather&&e.currentCity.data.weather,city:e.currentCity.data.name&&e.currentCity.data.name,isToggleLoading:e.appConfig.isToggleLoading}}),W)((function(e){var t=e.getGeo,a=e.getWeather,r=e.temperature,i=e.city,o=e.isToggleLoading,l=Object(n.useState)(0),u=Object(T.a)(l,2),s=u[0],d=u[1];return c.a.createElement("div",{className:"widjet"},c.a.createElement(O,{temperature:r,city:i}),s?c.a.createElement(C,{getWeather:a}):c.a.createElement(_,{getGeo:t}),c.a.createElement(j,{routeClick:d}),o&&c.a.createElement(k,null))}));a(57);i.a.render(c.a.createElement(o.a,{store:y},c.a.createElement(D,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.af15d0d4.chunk.js.map